<!DOCTYPE html>
<html>
<head>
    <style>
        :root {
            --square-size: 15vw; /* You can change this to tweak the size of the squares */
            --custom-whitish: #f0f0f0;
        }

        body {
            display: flex;
            flex-direction: column; /* This makes the grid and the button stack vertically */
            justify-content: flex-start; /* This places the grid and the button towards the top */
            align-items: center; /* This centers the grid and the button horizontally */
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            padding-top: 20px;
        }

        #show-keyboard-button {
            width: 150px; /* Adjust to make the button wider or narrower */
            height: 50px; /* Adjust to make the button taller or shorter */
            margin-top: 20px; /* Adds some space between the grid and the button */
            font-size: 20px; /* Adjust to make the text bigger or smaller */
        }

        #grid-container {
            display: grid;
            grid-template-columns: repeat(5, var(--square-size));
            grid-template-rows: repeat(6, var(--square-size));
            gap: 10px;
            /* background-color: gray; */
        }

        .grid-item {
            width: var(--square-size);
            height: var(--square-size);
            background-color: var(--custom-whitish);
            border: 3px solid gray;

            /* The following part is about the text in the boxes */
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: calc(var(--square-size) / 1.1); /* Make the font barely smaller than the squares */
        }
    </style>
</head>
    <body>
        <div id="grid-container"></div>

        <input type="text" id="hidden-input" style="opacity: 0; position: absolute; pointer-events: none;">

        <button id="show-keyboard-button">Show Keyboard</button>

        <script>

            function assert(condition, message = "generic msg"){
                if(!condition){
                    alert(`assertion failed: ${message}`);
                }
            }

            function getElemById(id){
                let result = document.getElementById(id);
                assert(result, `failed to get element with id '${id}'`);
                return result;
            }

            // get rid of this in prod. Only here so I can know when a change goes through
            // window.onload = () => {
            //     alert('Page refreshed at ' + new Date().toLocaleTimeString());
            // };

            const show_keyboard_button = getElemById('show-keyboard-button');

            // trick to make keyboard show up on mobile devices.
            show_keyboard_button.addEventListener('click', () => {
                getElemById('hidden-input').focus();
            });

            // Generate the grid squares
            const gridContainer = document.getElementById('grid-container');
            for (let i = 0; i < 30; i++) {
                const div = document.createElement('div');
                div.classList.add('grid-item');
                div.id = `grid-item-${i}`; // give each square it's own id so I can get it easily
                gridContainer.appendChild(div);
            }

            // code for handling typing in the squares

            let index = 0;

            function incIndex(){
                if(index < 29){
                    index++;
                }
            }

            function decIndex(){
                if(index > 0){
                    index--;
                }
            }

            function isSingleLetter(str) {
                let regex = /^[A-Za-z]+$/;
                return str.length === 1 && regex.test(str);
            }


            document.body.addEventListener('keydown', (event) => {
                let key_str = event.key;
                const square = getElemById(`grid-item-${index}`);

                if(isSingleLetter(key_str)){
                    assert(square, "didn't find a square w/ index: " + index);
                    square.textContent = key_str.toLocaleUpperCase();
                    incIndex();
                } else if(key_str == 'Backspace'){
                    square.textContent = "";
                    decIndex();
                }
            });
        </script>
        
    </body>
</html>
